<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/css/profile.css">
    <title>Profile</title>
</head>

<body>
    <div class="pageWrapper">
        <div class="contentWrapper">
            <div class="primary-dashboard">
                <div class="left">
                    <div class="username">
                        <%= user.name %>
                    </div>
                    <div class="name">
                        <%= user.email %>
                    </div>
                    <button class="edit" id="edit-btn">Update</button>
                </div>
                <div class="right">
                    <div class="balance"></div>
                    <div class="image">
                        <label for="update-img">
                            <img src="https://scontent.xx.fbcdn.net/v/t1.15752-0/p280x280/97277716_239301293831022_6040842150017499136_n.jpg?_nc_cat=100&_nc_sid=b96e70&_nc_eui2=AeEe2LzQkNDYFOrLunk792mf1u4s5DCPhm7W7izkMI-GbnbOfEJm1RWow5XHmRGWM3J47NZknt8LrtfCBjeuy5OH&_nc_oc=AQmcq9cRMbLEpSnJMaBnAVMbSZmUr3Z-77nPmA9zHoYCH4qBRxg4iTbeP-PUr6zIW8o&_nc_ad=z-m&_nc_cid=0&_nc_zor=9&_nc_ht=scontent.xx&_nc_tp=6&oh=26053ab62533e1c9e50c40d03dc2ba5c&oe=5EE3AD45" alt="">
                        </label>
                        <input type="file" name="" id="update-img">
                    </div>
                </div>
            </div>

            <div class="all-info">
                <div class="nav">
                    <a href="#" id="1" class="tab active">Personal</a>
                    <a href="#" id="2" class="tab">Occupational</a>
                    <a href="#" id="5" class="tab">Psychological</a>
                    <a href="#" id="3" class="tab">Materials Read</a>
                    <a href="#" id="4" class="tab">Tests Taken</a>
                </div>
                <div class="each-info" id="info-1">
                    <div class="header">Personal</div>
                    <div class="info-box">
                        <div class="single-fields">
                            <div class="field">Age</div>
                            <div class="field">Gender</div>
                            <div class="field">Marital Status</div>
                            <div class="field">Area of living</div>
                            <div class="field">Type of Residence</div>
                            <div class="field">Family Type</div>
                        </div>
                        <div class="single-values">
                            <div class="value">
                                <%= user.age %>
                            </div>
                            <div class="value">
                                <%= user.gender %>
                            </div>
                            <div class="value">
                                <%= user.maritalStatus %>
                            </div>
                            <div class="value">
                                <%= user.livingArea %>
                            </div>
                            <div class="value">
                                <%= user.residenceType %>
                            </div>
                            <div class="value">
                                <%= user.familyType %>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="each-info" id="info-2" style="display: none;">
                    <div class="header">Occupational</div>
                    <div class="info-box">
                        <div class="single-fields">
                            <div class="field">Education</div>
                            <div class="field">Occupation</div>
                            <div class="field">Monthly Income</div>
                        </div>
                        <div class="single-values">
                            <div class="value">
                                <%= user.education %>
                            </div>
                            <div class="value">
                                <%= user.occupation %>
                            </div>
                            <div class="value">
                                <%= user.monthlyIncome %>!!</div>
                        </div>
                    </div>
                </div>

                <div class="each-info" id="info-3" style="display: none;">
                    <div class="header">Materials Read</div>
                    <!-- <div class="info-box">
                        <div class="single-fields">
                            <div class="field">Family history of mental illness</div>
                            <div class="field">Child Abuse</div>
                            <div class="field">Relationship Problem</div>
                            <div class="field">Personality Pattern </div>
                            <div class="field">Stressful Events</div>
                            <div class="field">Substance Abuse</div>
                            <div class="field">Diagnosed Mental Disorder</div>
                            <div class="field">Treatment History</div>
                        </div>
                        <div class="single-values">

                        </div>
                    </div> -->
                    <% for (let i=0; i<user.materialsRead.length; i++) { %>
                        <div class="info-box" style="flex-direction: column;">
                            <div class="title">
                                <%= user.materialsRead[i].name %>
                            </div>
                            <div class="add-info">
                                <%= user.materialsRead[i].score %> Points &#8226
                                    <%= user.materialsRead[i].date %>
                            </div>
                            <div class="lower">
                                <div class=""></div>
                                <div class="materialsRead">
                                    <button name="<%= user.materialsRead[i].id %>">Read Again</button>
                                </div>
                            </div>
                        </div>
                        <% } %>
                </div>

                <div class="each-info" id="info-4" style="display: none;">
                    <div class="header">Tests Taken</div>
                    <% for (let i=0; i<user.testsTaken.length; i++) { %>
                        <div class="info-box" style="flex-direction: column;">
                            <div class="title">
                                <%= user.testsTaken[i].name %>
                            </div>
                            <div class="add-info">
                                <%= user.testsTaken[i].score %> Points &#8226
                                    <%= user.testsTaken[i].date %>
                            </div>
                            <div class="lower">
                                <div class=""></div>
                                <div class="testsTaken">
                                    <button name="<%= user.testsTaken[i].id %>">Retake Test</button>
                                </div>
                            </div>
                        </div>
                        <% } %>
                </div>
            </div>

        </div>
    </div>
</body>
<script>
    $('#edit-btn').click((e) => {
        location = '/users/update-profile'
    })
    $('.materialsRead button').click((e) => {
        location = '/users/single-material/' + e.target.name
    })
    $('.testsTaken button').click((e) => {
        location = '/app-admin/single-test/' + e.target.name
    })
    $('.tab').click((e) => {
        const eachInfo = $('.each-info')
        for (i = 0; i < eachInfo.length; i++) {
            $(eachInfo[i]).hide()
        }
        const eachTabs = $('.tab')
        for (let i = 0; i < eachTabs.length; i++) {
            $(eachTabs[i]).removeClass('active')
        }
        const id = '#info-' + e.target.id
        $(id).show()
        $(e.target).addClass('active')
    })
</script>

</html>